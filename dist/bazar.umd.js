!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.bazar={})}(this,function(e){var n=new Map;e.getState=function(e){var t=(n.get(e)||{}).sync;return t?t():void 0},e.register=function(e){var t=e.id,r=e.interests;void 0===r&&(r=[]);var o=e.willRerender;if(void 0===o&&(o=!1),!t)throw new Error("Expected non-null id");if(n.has(t)&&!o)throw new Error("Expected unique id");n.set(t,Object.assign({},e,{interests:new Set(r)}))},e.edict=function(e){var t=n.get(e).sync;if(!t)throw new Error("Sync is required to issue an edict");var r=t();n.forEach(function(n,t){if(n.interests.has(e)){var o=n.onEdict;if(!o)throw new Error("Triggering undefined onEdict on "+t);o(e,r)}})},e.poke=function(e,t){var r=(n.get(e)||{}).onPoke;if(!r)throw new Error("Poking component without onPoke method");r(t)}});
