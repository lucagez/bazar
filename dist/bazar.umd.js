!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.bazar={})}(this,function(t){t.initStore=function(t){void 0===t&&(t={}),("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})._BAZAR_STORE_={},_BAZAR_STORE_.initial={};var e=Object.keys(t);e.length>0&&e.forEach(function(e){_BAZAR_STORE_.initial[e]=t[e]})},t.initState=function(t){return(_BAZAR_STORE_.initial||{})[t]},t.getState=function(t){if(!_BAZAR_STORE_.hasOwnProperty(t))throw new Error("Attempted reading state from "+t+", non-registered component");return _BAZAR_STORE_[t].sync()},t.getStates=function(t){var e={};return t.forEach(function(t){if(!_BAZAR_STORE_.hasOwnProperty(t))throw new Error("Attempted reading state from "+t+", non-registered component");e[t]=_BAZAR_STORE_[t].sync()}),e},t.register=function(t){var e=t.id,n=t.sync,o=t.onPoke,r=t.onNotify,i=t.interests;if(!e)throw new Error("Expected registrant to have non-null id value");if(!n)throw new Error("Expected registrant to have a sync function");if(_BAZAR_STORE_.hasOwnProperty(e))throw new Error("Expected unique id");_BAZAR_STORE_[e]={sync:n,onPoke:o,onNotify:r,interests:i}},t.notify=function(t){if(!t)throw new Error("config object is required to correctly notify a state update");var e=t.id,n=(0,t.sync)();Object.keys(_BAZAR_STORE_).forEach(function(t){if(-1!==(_BAZAR_STORE_[t].interests||[]).indexOf(e)){var o=_BAZAR_STORE_[t].onNotify;if(!o)throw new Error("Attempted trigger of undefined onNotify function on "+t);o(e,n)}})},t.poke=function(t,e){var n=(_BAZAR_STORE_[t]||{}).onPoke;if(!n)throw new Error("Attempted to poke component without an onPoke function");n(e)}});
