var n=function(n){if(!n)throw new Error("config object is required to correctly notify a state update");var t=n.id,e=(0,n.sync)();Object.keys(_BAZAR_STORE_).forEach(function(n){if(-1!==(_BAZAR_STORE_[n].interests||[]).indexOf(t)){var o=_BAZAR_STORE_[n].onNotify;if(!o)throw new Error("Attempted trigger of undefined onNotify function on "+n);o(t,e)}})},t=function(n){var t=n.id,e=n.sync,o=n.onPoke,r=n.onNotify,i=n.interests;if(!t)throw new Error("Expected registrant to have non-null id value");if(!e)throw new Error("Expected registrant to have a sync function");if(_BAZAR_STORE_.hasOwnProperty(t))throw new Error("Expected unique id");_BAZAR_STORE_[t]={sync:e,onPoke:o,onNotify:r,interests:i}},e=function(n,t){var e=(_BAZAR_STORE_[n]||{}).onPoke;if(!e)throw new Error("Attempted to poke component without an onPoke function");e(t)},o=function(n){if(!_BAZAR_STORE_.hasOwnProperty(n))throw new Error("Attempted reading state from "+n+", non-registered component");return _BAZAR_STORE_[n].sync()},r=function(n){var t={};return n.forEach(function(n){if(!_BAZAR_STORE_.hasOwnProperty(n))throw new Error("Attempted reading state from "+n+", non-registered component");t[n]=_BAZAR_STORE_[n].sync()}),t},i=function(n){return(_BAZAR_STORE_.initial||{})[n]},f=function(n){void 0===n&&(n={}),("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})._BAZAR_STORE_={},_BAZAR_STORE_.initial={};var t=Object.keys(n);t.length>0&&t.forEach(function(t){_BAZAR_STORE_.initial[t]=n[t]})};export{f as initStore,i as initState,o as getState,r as getStates,t as register,n as notify,e as poke};
